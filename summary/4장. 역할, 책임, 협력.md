# 4장. 역할, 책임, 협력

- **협력**
  - 협력은 객체의 요청으로부터 시작된다. 요청을 받은 객체는 필요한 서비스를 제공하는 것으로 응답한다. 이런 동작의 반복으로 협력은 다수의 요청과 응답으로 구성되며 연쇄적인 요청과 응답의 흐름으로 구성된다.
  - 훌륭한 객체지향 설계란 다른 객체와 협력하고 조화를 이루며 적극적으로 상호작용하는 협력적인 객체를 창조하는 것이다.
  - 훌륭한 객체는 훌륭한 협력을 설계할 때만 얻을 수 있다.
- **책임**
  - 객체지향에서는 어떤 객체가 어떤 요청에 대해 대답할 수 있거나, 특정 행동을 할 의무가 있는 경우 해당 객체가 책임을 가진다고 말한다.
  - 객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당 하는 것이다.
  - 책임과 협력의 구조가 자리를 잡기 전까지는 책임을 구현하는 방법에 대한 고민은 잠시 뒤로 미루는 것이 좋다. 어떤 클래스가 필요하고 어떤 메서드를 포함해야 하는지를 결정하는 것은 책임과 메시지에 대한 대략적인 윤곽을 잡은 후에 시작해도 늦지 않다.
- **역할**
  - 객체가 수행하는 책임의 집합은 객체가 협력 안에서 수행하는 역할을 의미한다.
  - 역할은 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 구성요소이다.
  - 역할은 “이 자리는 해당 역할을 수행할 수 있는 어떤 객체라도 대신할 수 있습니다” 라고말하는 것과 같다.
  - 역할은 객체지향 설계의 단순성, 유연성, 재사용성을 뒷받침하는 핵심 개념이다.
- **객체의 모양을 결정하는 협력**
  - 객체는 시스템에 필요한 데이터를 저장하기 위해 존재한다는 선입견은 옳지 않다. 객체는 행위를 수행하며 협력에 참여하기 위해 존재한다. 따라서 실제로 중요한 것은, 객체의 행동, 즉 책임이다.
  - 객체지향의 핵심은, 클래스를 어떻게 구현할 것인가가 아니라, 객체가 협력 안에서 어떤 책임과 역할을 수행할 것인지를 결정하는 것이다.
  - **올바른 객체 설계를 위해서는 먼저 견고하고 깔끔한 협력을 설계해야 한다.**
    - 협력설계는 참여 객체들이 주고받을 요청과 응답의 흐름을 결정하는 것이다. 이 흐름은 수행될 책임이 된다. 이 책임은 다시 객체가 외부에 제공하게 될 행동이 된다.
  - 협력이라는 문맥에서 객체가 수행하게 될 적절한 책임, 즉 행동을 결정한 후에 그 행동을 수행하는 데 필요한 데이터를 고민해야 한다. 그리고 객체가 협력에 참여하기 위해 필요한 데이터와 행동이 어느 정도 결정된 후에 클래스의 구현 방법을 결정해야 한다.
- **객체지향 설계 기법**
  - **책임주도설계(Responsibility-driven design) :** 협력에 필요한 책임들을 식별하고 적합한 객체에게 책임을 할당하는 방식으로 설계하는 것.
  - **순서**
    - 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
    - 시스템 책임을 더 작은 책임으로 분할한다.
    - 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당
    - 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
    - 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.
  - **디자인 패턴 :** 특정 문제를 해결하기 위해 이미 식별해 놓은 역할,책임, 협력의 모음을 의미한다. 그렇기 때문에 디자인 패턴은 책임 주도 설계의 결과물인 동시에 지름길이다.
  - **테스트주도개발(Test-driven development) :** 테스트를 먼저 작성하고 테스트를 통과하는 구체적인 코드를 추가하면서 개발하는 것.
